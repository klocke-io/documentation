import{_ as a,c as t,o as r,a2 as o}from"./chunks/framework.B8WFj13S.js";const h=JSON.parse('{"title":"In-Place Resource Updates","description":"In-place updates of Pod resources","frontmatter":{"aliases":["/docs/gardener/in-place-resource-updates/"],"categories":["Users","Operators"],"description":"In-place updates of Pod resources","github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/usage/autoscaling","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/autoscaling/in-place-resource-updates.md","to":"in-place-resource-updates.md"},"persona":"Users","title":"In-Place Resource Updates","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/autoscaling/in-place-resource-updates/index.md","filePath":"docs/gardener/autoscaling/in-place-resource-updates.md","lastUpdated":null}'),s={name:"docs/gardener/autoscaling/in-place-resource-updates/index.md"};function c(i,e,n,l,d,u){return r(),t("div",null,e[0]||(e[0]=[o(`<h1 id="in-place-updates-of-pod-resources" tabindex="-1">In-Place Updates of Pod Resources <a class="header-anchor" href="#in-place-updates-of-pod-resources" aria-label="Permalink to &quot;In-Place Updates of Pod Resources&quot;">​</a></h1><p>This is a short guide covering the enablement of <code>in-place</code> resource updates in the <code>Vertical Pod Autoscaler</code>.</p><h2 id="compatibility" tabindex="-1">Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;Compatibility&quot;">​</a></h2><p><code>In-place</code> resource updates got introduced as an alpha <a href="https://kubernetes.io/blog/2023/05/12/in-place-pod-resize-alpha/" target="_blank" rel="noreferrer">feature</a> in Kubernetes 1.27. In Kubernetes 1.33, it got promoted to beta and enabled by default. On the <code>Vertical Pod Autoscaler</code> side, with Release <a href="https://github.com/kubernetes/autoscaler/releases/tag/vertical-pod-autoscaler-1.4.0" target="_blank" rel="noreferrer">1.4.0</a>, <code>in-place</code> resources updates are available as an <em>alpha</em> <a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/docs/features.md#in-place-updates-inplaceorrecreate" target="_blank" rel="noreferrer">feature</a> for <code>vpa-admission-controller</code> and <code>vpa-updater</code>.</p><h3 id="kubernetes" tabindex="-1">Kubernetes <a class="header-anchor" href="#kubernetes" aria-label="Permalink to &quot;Kubernetes&quot;">​</a></h3><p>With Kubernetes 1.33, the <code>InPlacePodVerticalScaling</code> feature gate, which enables <code>in-place</code> resource updates, is enabled by default and <strong>does not</strong> require additional instrumentation. Prior versions, from Kubernetes 1.27 onwards require the <code>InPlacePodVerticalScaling</code> feature gate <strong>to be enabled</strong> for both <em>kube-apiserver</em> and <em>kubelet</em>.</p><h3 id="vertical-pod-autoscaling" tabindex="-1">Vertical Pod Autoscaling <a class="header-anchor" href="#vertical-pod-autoscaling" aria-label="Permalink to &quot;Vertical Pod Autoscaling&quot;">​</a></h3><p>With <a href="https://github.com/kubernetes/autoscaler/releases/tag/vertical-pod-autoscaler-1.4.0" target="_blank" rel="noreferrer">1.4.0</a>, the <code>InPlaceOrRecreate</code> feature gate, which enables <code>in-place</code> resource updates for <code>vpa-admission-controller</code> and <code>vpa-updater</code>, got introduced as an <em>alpha</em> feature. To explicitly enable the feature for <code>Shoot</code>, <code>Seed</code> or <code>Garden</code> clusters, the <code>Vertical Pod Autoscaling</code> configurations, for the respective cluster types need to include an additional <code>InPlaceOrRecreate: true</code> entry in the <code>featureGates</code> map. Refer to the <a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/docs/features.md#usage" target="_blank" rel="noreferrer">usage guide</a> for details about instrumenting a <code>VerticalPodAutoscaler</code> resource with <code>in-place</code> updates.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><p>As described in the <a href="/documentation/pr-preview/pr-2/docs/gardener/autoscaling/in-place-resource-updates/#compatibility">Compatibility</a> section, <em>alpha</em> versions of the <code>InPlacePodVerticalScaling</code> Kubernetes feature require additional configuration to get the <code>in-place</code> updates enabled. This section covers the components that need to be configured both on <code>Kubernetes</code> and <code>Vertical Pod Autoscaler</code> sides.</p><h3 id="shoot" tabindex="-1">Shoot <a class="header-anchor" href="#shoot" aria-label="Permalink to &quot;Shoot&quot;">​</a></h3><p>Since <code>Vertical Pod Autoscaler</code> has its <code>InPlaceOrRecreate</code> feature gate still in <em>alpha</em>, and Kubernetes promoted <code>InPlacePodVerticalScaling</code> to <em>beta</em> in 1.33, it is allowed to configure <code>in-place</code> resource updates only for <code>Shoot</code>(s) with Kubernetes version 1.33+.</p><ul><li><p>Enable the <code>InPlaceOrRecreate</code> feature gate for <code>Vertical Por Autoscaler</code> in the Shoot spec:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  kubernetes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    verticalPodAutoscaler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      featureGates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        InPlaceOrRecreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div></li><li><p>Make sure that the <code>InPlacePodVerticalScaling</code> Kubernetes feature gate is not explicitly disabled in the Shoot spec for:</p><ul><li>kube-apiserver: <code>.spec.kubernetes.kubeAPIServer.featureGates</code></li><li>kubelet: <code>.spec.kubernetes.kubelet.featureGates</code> or <code>.spec.provider.workers[].kubernetes.kubelet.featureGates</code></li></ul></li></ul><h3 id="seed" tabindex="-1">Seed <a class="header-anchor" href="#seed" aria-label="Permalink to &quot;Seed&quot;">​</a></h3><blockquote><p><strong>Disclaimer:</strong> The following configurations are relevant for Gardener <code>Operators</code> that have access to <code>Seed</code> cluster(s).</p></blockquote><p>For <code>Seed</code> clusters, <code>Vertical Pod Autoscaler</code> features gates can be managed in <code>seed.spec.settings.verticalPodAutoscaler.featureGates</code>. There are no additional Kubernetes versions validation when configuring <code>Seed</code> clusters.</p><h3 id="garden" tabindex="-1">Garden <a class="header-anchor" href="#garden" aria-label="Permalink to &quot;Garden&quot;">​</a></h3><blockquote><p><strong>Disclaimer:</strong> The following configurations are relevant for Gardener <code>Operators</code> that have access to <code>Garden</code> cluster(s).</p></blockquote><p>For <code>Garden</code> clusters, <code>Vertical Pod Autoscaler</code> feature gates can be managed in <code>garden.spec.runtimeCluster.settings.verticalPodAutoscaler.featureGates</code>. There are no additional Kubernetes versions validation when configuring <code>Garden</code> clusters.</p><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><ul><li><a href="https://kubernetes.io/blog/2025/05/16/kubernetes-v1-33-in-place-pod-resize-beta/" target="_blank" rel="noreferrer">Kubernetes v1.33: In-Place Pod Resize Graduated to Beta</a></li><li><a href="https://kubernetes.io/blog/2023/05/12/in-place-pod-resize-alpha/" target="_blank" rel="noreferrer">Kubernetes 1.27: In-place Resource Resize for Kubernetes Pods (alpha)</a></li><li><a href="https://github.com/kubernetes/autoscaler/releases/tag/vertical-pod-autoscaler-1.4.0" target="_blank" rel="noreferrer">Vertical Pod Autoscaling Release 1.4.0</a></li><li><a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/docs/features.md#in-place-updates-inplaceorrecreate" target="_blank" rel="noreferrer">Vertical Pod Autoscaling In-Place Updates</a></li></ul>`,21)]))}const b=a(s,[["render",c]]);export{h as __pageData,b as default};
