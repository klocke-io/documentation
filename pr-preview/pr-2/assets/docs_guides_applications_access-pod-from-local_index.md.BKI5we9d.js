import{_ as t,c as o,o as r,a2 as s}from"./chunks/framework.B8WFj13S.js";const a="/documentation/pr-preview/pr-2/assets/howto-port-forward.D51G-S85.svg",g=JSON.parse('{"title":"Access a Port of a Pod Locally","description":"","frontmatter":{"category":"Debugging","github_repo":"https://github.com/gardener/documentation","github_subdir":"website/documentation/guides/applications","last_reviewed":"30.05.2018","level":"beginner","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/guides/applications/access-pod-from-local.md","to":"access-pod-from-local.md"},"reviewer":"Tieyan Fu","scope":"app-developer","status":"Reviewed","title":"Access a Port of a Pod Locally","prev":false,"next":false},"headers":[],"relativePath":"docs/guides/applications/access-pod-from-local/index.md","filePath":"docs/guides/applications/access-pod-from-local.md","lastUpdated":null}'),i={name:"docs/guides/applications/access-pod-from-local/index.md"};function n(c,e,l,p,d,u){return r(),o("div",null,e[0]||(e[0]=[s('<h1 id="access-a-port-of-a-pod-locally" tabindex="-1">Access a Port of a Pod Locally <a class="header-anchor" href="#access-a-port-of-a-pod-locally" aria-label="Permalink to &quot;Access a Port of a Pod Locally&quot;">​</a></h1><h2 id="question" tabindex="-1">Question <a class="header-anchor" href="#question" aria-label="Permalink to &quot;Question&quot;">​</a></h2><p>You have deployed an application with a web UI or an internal endpoint in your Kubernetes (K8s) cluster. How to access this endpoint <strong>without an external load balancer</strong> (e.g., Ingress)?</p><p>This tutorial presents two options:</p><ul><li>Using Kubernetes port forward</li><li>Using Kubernetes apiserver proxy</li></ul><p>Please note that the options described here are mostly for quick testing or troubleshooting your application. For enabling access to your application for productive environment, please refer to the <a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noreferrer">official Kubernetes documentation</a>.</p><h2 id="solution-1-using-kubernetes-port-forward" tabindex="-1">Solution 1: Using Kubernetes Port Forward <a class="header-anchor" href="#solution-1-using-kubernetes-port-forward" aria-label="Permalink to &quot;Solution 1: Using Kubernetes Port Forward&quot;">​</a></h2><p>You could use the port forwarding functionality of <code>kubectl</code> to access the pods from your local host <strong>without involving a service</strong>.</p><p>To access any pod follow these steps:</p><ol><li>Run <code>kubectl get pods</code></li><li>Note down the name of the pod in question as <code>&lt;your-pod-name&gt;</code></li><li>Run <code>kubectl port-forward &lt;your-pod-name&gt; &lt;local-port&gt;:&lt;your-app-port&gt;</code></li><li>Run a web browser or curl locally and enter the URL: <code>http(s)://localhost:&lt;local-port&gt;</code></li></ol><p>In addition, <code>kubectl port-forward</code> allows using a resource name, such as a deployment name or service name, to select a matching pod to port forward. More details can be found in the <a href="https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/" target="_blank" rel="noreferrer">Kubernetes documentation</a>.</p><p>The main drawback of this approach is that the pod&#39;s name changes as soon as it is restarted. Moreover, you need to have a web browser on your client and you need to make sure that the local port is not already used by an application running on your system. Finally, sometimes the port forwarding is canceled due to nonobvious reasons. This leads to a kind of shaky approach. A more stable possibility is based on accessing the app via the kube-proxy, which accesses the corresponding service.</p><p><img src="'+a+'" alt="port-forward"></p><h2 id="solution-2-using-the-apiserver-proxy-of-your-kubernetes-cluster" tabindex="-1">Solution 2: Using the apiserver Proxy of Your Kubernetes Cluster <a class="header-anchor" href="#solution-2-using-the-apiserver-proxy-of-your-kubernetes-cluster" aria-label="Permalink to &quot;Solution 2: Using the apiserver Proxy of Your Kubernetes Cluster&quot;">​</a></h2><p>There are <a href="https://kubernetes.io/docs/concepts/cluster-administration/proxies/" target="_blank" rel="noreferrer">several different proxies</a> in Kubernetes. In this tutorial we will be using <em>apiserver proxy</em> to enable the access to the services in your cluster without Ingress. <strong>Unlike the first solution, here a service is required.</strong></p><p>Use the following format to compose a URL for accessing your service through an existing proxy on the Kubernetes cluster:</p><p><code>https://&lt;your-cluster-master&gt;/api/v1/namespace/&lt;your-namespace&gt;/services/&lt;your-service&gt;:&lt;your-service-port&gt;/proxy/&lt;service-endpoint&gt;</code></p><p><strong>Example:</strong></p><table tabindex="0"><thead><tr><th>your-main-cluster</th><th style="text-align:center;">your-namespace</th><th style="text-align:right;">your-service</th><th style="text-align:right;">your-service-port</th><th style="text-align:right;">your-service-endpoint</th><th style="text-align:right;">url to access service</th></tr></thead><tbody><tr><td>api.testclstr.cpet.k8s.sapcloud.io</td><td style="text-align:center;">default</td><td style="text-align:right;">nginx-svc</td><td style="text-align:right;">80</td><td style="text-align:right;">/</td><td style="text-align:right;"><code>http://api.testclstr.cpet.k8s.sapcloud.io/api/v1/namespaces/default/services/nginx-svc:80/proxy/</code></td></tr><tr><td>api.testclstr.cpet.k8s.sapcloud.io</td><td style="text-align:center;">default</td><td style="text-align:right;">docker-nodejs-svc</td><td style="text-align:right;">4500</td><td style="text-align:right;">/cpu?baseNumber=4</td><td style="text-align:right;"><code>https://api.testclstr.cpet.k8s.sapcloud.io/api/v1/namespaces/default/services/docker-nodejs-svc:4500/proxy/cpu?baseNumber=4</code></td></tr></tbody></table><p>For more details on the format, please refer to the <a href="https://kubernetes.io/docs/tasks/access-application-cluster/access-cluster/#discovering-builtin-services" target="_blank" rel="noreferrer">official Kubernetes documentation</a>.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>There are applications which do not support relative URLs yet, e.g. <a href="https://github.com/prometheus/prometheus/issues/1583" target="_blank" rel="noreferrer">Prometheus</a> (as of November, 2022). This typically leads to missing JavaScript objects, which could be investigated with your browser&#39;s development tools. If such an issue occurs, please use the <code>port-forward</code> approach <a href="documentation/pr-preview/pr-2/docs/guides/applications/access-pod-from-local/#solution-1-using-kubernetes-port-forward">described above</a>.</p></div>',21)]))}const b=t(i,[["render",n]]);export{g as __pageData,b as default};
