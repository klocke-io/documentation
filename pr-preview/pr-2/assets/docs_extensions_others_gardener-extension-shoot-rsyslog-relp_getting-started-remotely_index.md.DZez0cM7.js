import{_ as s,c as t,o,a2 as n}from"./chunks/framework.B8WFj13S.js";const g=JSON.parse('{"title":"Deploying Rsyslog Relp Extension Remotely","description":"Learn how to set up a development environment using own Seed clusters on an existing Kubernetes cluster","frontmatter":{"description":"Learn how to set up a development environment using own Seed clusters on an existing Kubernetes cluster","github_repo":"https://github.com/gardener/gardener-extension-shoot-rsyslog-relp","github_subdir":"docs/development","params":{"github_branch":"main"},"path_base_for_github_subdir":{"from":"content/docs/extensions/others/gardener-extension-shoot-rsyslog-relp/getting-started-remotely.md","to":"getting-started-remotely.md"},"persona":"Developers","title":"Deploying Rsyslog Relp Extension Remotely","prev":false,"next":false},"headers":[],"relativePath":"docs/extensions/others/gardener-extension-shoot-rsyslog-relp/getting-started-remotely/index.md","filePath":"docs/extensions/others/gardener-extension-shoot-rsyslog-relp/getting-started-remotely.md","lastUpdated":null}'),i={name:"docs/extensions/others/gardener-extension-shoot-rsyslog-relp/getting-started-remotely/index.md"};function a(r,e,l,h,p,d){return o(),t("div",null,e[0]||(e[0]=[n('<h1 id="deploying-rsyslog-relp-extension-remotely" tabindex="-1">Deploying Rsyslog Relp Extension Remotely <a class="header-anchor" href="#deploying-rsyslog-relp-extension-remotely" aria-label="Permalink to &quot;Deploying Rsyslog Relp Extension Remotely&quot;">​</a></h1><p>This document will walk you through running the Rsyslog Relp extension controller on a remote seed cluster and the rsyslog relp admission component in your local garden cluster for development purposes. This guide uses Gardener&#39;s <a href="documentation/pr-preview/pr-2/docs/gardener/deployment/getting_started_locally_with_extensions/">setup with provider extensions</a> and builds on top of it.</p><p>If you encounter difficulties, please open an issue so that we can make this process easier.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>Make sure that you have a running Gardener setup with provider extensions. The steps to complete this can be found in the <a href="documentation/pr-preview/pr-2/docs/gardener/deployment/getting_started_locally_with_extensions/">Deploying Gardener Locally and Enabling Provider-Extensions</a> guide.</li><li>Make sure you are running Gardener version <code>&gt;= 1.95.0</code> or the latest version of the master branch.</li></ul><h2 id="setting-up-the-rsyslog-relp-extension" tabindex="-1">Setting up the Rsyslog Relp Extension <a class="header-anchor" href="#setting-up-the-rsyslog-relp-extension" aria-label="Permalink to &quot;Setting up the Rsyslog Relp Extension&quot;">​</a></h2><p><strong>Important:</strong> Make sure that your <code>KUBECONFIG</code> env variable is targeting the local Gardener cluster!</p><p>The location of the Gardener project from the Gardener setup is expected to be under the same root as this repository (e.g. ~/go/src/github.com/gardener/). If this is not the case, the location of Gardener project should be specified in <code>GARDENER_REPO_ROOT</code> environment variable:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GARDENER_REPO_ROOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;path_to_gardener_project&gt;&quot;</span></span></code></pre></div><p>Then you can run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-extension-up</span></span></code></pre></div><p>In case you have added additional Seeds you can specify the seed name:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-extension-up</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SEED_NAME=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seed-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h2 id="creating-a-shoot-cluster" tabindex="-1">Creating a Shoot Cluster <a class="header-anchor" href="#creating-a-shoot-cluster" aria-label="Permalink to &quot;Creating a Shoot Cluster&quot;">​</a></h2><p>Once the above step is completed, you can create a Shoot cluster. In order to create a Shoot cluster, please create your own <code>Shoot</code> definition depending on providers on your <code>Seed</code> cluster.</p><h2 id="configuring-the-shoot-cluster-and-deploying-the-rsyslog-relp-echo-server" tabindex="-1">Configuring the Shoot Cluster and deploying the Rsyslog Relp Echo Server <a class="header-anchor" href="#configuring-the-shoot-cluster-and-deploying-the-rsyslog-relp-echo-server" aria-label="Permalink to &quot;Configuring the Shoot Cluster and deploying the Rsyslog Relp Echo Server&quot;">​</a></h2><p>To be able to properly test the rsyslog relp extension you need a running rsyslog relp echo server to which logs from the Shoot nodes can be sent. To deploy the server and configure the rsyslog relp extension on your Shoot cluster you can run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure-shoot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SHOOT_NAME=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shoot-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SHOOT_NAMESPACE=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shoot-namespac</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>This command will deploy an rsyslog relp echo server in your Shoot cluster in the <code>rsyslog-relp-echo-server</code> namespace. It will also add configuration for the <code>shoot-rsyslog-relp</code> extension to your <code>Shoot</code> spec by patching it with <code>./example/extension/&lt;shoot-name&gt;--&lt;shoot-namespace&gt;--extension-config-patch.yaml</code>. This file is automatically copied from <code>extension-config-patch.yaml.tmpl</code> in the same directory when you run <code>make configure-shoot</code> for the first time. The file also includes explanations of the properties you should set or change. The command will also deploy the <code>rsyslog-relp-tls</code> secret in case you wish to enable tls.</p><h2 id="tearing-down-the-development-environment" tabindex="-1">Tearing Down the Development Environment <a class="header-anchor" href="#tearing-down-the-development-environment" aria-label="Permalink to &quot;Tearing Down the Development Environment&quot;">​</a></h2><p>To tear down the development environment, delete the Shoot cluster or disable the <code>shoot-rsyslog-relp</code> extension in the Shoot&#39;s specification. When the extension is not used by the Shoot anymore, you can run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-extension-down</span></span></code></pre></div><p>The make target will delete the ControllerDeployment and ControllerRegistration of the extension, and the <code>shoot-rsyslog-relp</code> admission helm deployment.</p>',23)]))}const u=s(i,[["render",a]]);export{g as __pageData,u as default};
