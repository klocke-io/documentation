import{_ as t,c as r,o,a2 as n}from"./chunks/framework.Bfq10Vlj.js";const p=JSON.parse('{"title":"Gardener Enhances Observability with OpenTelemetry Integration for Logging","description":"","frontmatter":{"aliases":["/blog/2025/06/18/gardener-enhances-observability-with-opentelemetry-integration-for-logging"],"authors":[{"avatar":"https://avatars.githubusercontent.com/nickytd","email":"nickytd@gmail.com","login":"nickytd","name":"Niki Dokovski"},{"avatar":"https://avatars.githubusercontent.com/rrhubenov","email":"rrhubenov@gmail.com","login":"rrhubenov","name":"Rado Hubenov"}],"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/blog/2025/06","linkTitle":"Gardener Enhances Observability with OpenTelemetry Integration for Logging","newsSubtitle":"June 18, 2025","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/blog/2025/06/06-18-gardener-enhances-observability-with-opentelemetry-integration-for-logging.md","to":"06-18-gardener-enhances-observability-with-opentelemetry-integration-for-logging.md"},"publishdate":"2025-06-18","title":"Gardener Enhances Observability with OpenTelemetry Integration for Logging"},"headers":[],"relativePath":"blog/2025/06/06-18-gardener-enhances-observability-with-opentelemetry-integration-for-logging/index.md","filePath":"blog/2025/06/06-18-gardener-enhances-observability-with-opentelemetry-integration-for-logging.md","lastUpdated":null}'),i={name:"blog/2025/06/06-18-gardener-enhances-observability-with-opentelemetry-integration-for-logging/index.md"};function a(l,e,s,g,c,d){return o(),r("div",null,e[0]||(e[0]=[n('<h1 id="gardener-enhances-observability-with-opentelemetry-integration-for-logging" tabindex="-1">Gardener Enhances Observability with OpenTelemetry Integration for Logging <a class="header-anchor" href="#gardener-enhances-observability-with-opentelemetry-integration-for-logging" aria-label="Permalink to &quot;Gardener Enhances Observability with OpenTelemetry Integration for Logging&quot;">​</a></h1><p>Gardener is advancing its observability capabilities by integrating OpenTelemetry, starting with log collection and processing. This strategic move, outlined in <a href="https://github.com/gardener/gardener/pull/11861" target="_blank" rel="noreferrer">GEP-34: OpenTelemetry Operator And Collectors</a>, lays the groundwork for a more standardized, flexible, and powerful observability framework in line with Gardener&#39;s <a href="https://github.com/gardener/logging/blob/master/docs/observability-2.0/Observability%202.0.md" target="_blank" rel="noreferrer">Observability 2.0 vision</a>.</p><h3 id="the-drive-towards-standardization" tabindex="-1">The Drive Towards Standardization <a class="header-anchor" href="#the-drive-towards-standardization" aria-label="Permalink to &quot;The Drive Towards Standardization&quot;">​</a></h3><p>Gardener&#39;s previous observability stack, though effective, utilized vendor-specific formats and protocols. This presented challenges in extending components and integrating with diverse external systems. The adoption of OpenTelemetry addresses these limitations by aligning Gardener with open standards, enhancing interoperability, and paving the way for future innovations like unified visualization, comprehensive tracing support and even LLM integrations via MCP (Model Context Propagation) enabled services.</p><h3 id="core-components-operator-and-collectors" tabindex="-1">Core Components: Operator and Collectors <a class="header-anchor" href="#core-components-operator-and-collectors" aria-label="Permalink to &quot;Core Components: Operator and Collectors&quot;">​</a></h3><p>The initial phase of this integration introduces two key OpenTelemetry components into Gardener-managed clusters:</p><ul><li><strong>OpenTelemetry Operator:</strong> Deployed on seed clusters (specifically in the <code>garden</code> namespace using <code>ManagedResources</code>), the <a href="https://github.com/open-telemetry/opentelemetry-operator" target="_blank" rel="noreferrer">OpenTelemetry Operator for Kubernetes</a> will manage the lifecycle of OpenTelemetry Collector instances across shoot control planes. Its deployment follows a similar pattern to the existing Prometheus and Fluent Bit operators and occurs during the <code>Seed</code> reconciliation flow.</li><li><strong>OpenTelemetry Collectors:</strong> A dedicated OpenTelemetry Collector instance will be provisioned for each shoot control plane namespace (e.g., <code>shoot--project--name</code>). These collectors, managed as <code>Deployment</code>s by the OpenTelemetry Operator via an <a href="https://github.com/open-telemetry/opentelemetry-operator/blob/main/apis/v1beta1/opentelemetrycollector_types.go" target="_blank" rel="noreferrer"><code>OpenTelemetryCollector</code> Custom Resource</a> created during <code>Shoot</code> reconciliation, are responsible for receiving, processing, and exporting observability data, with an initial focus on logs.</li></ul><h3 id="key-changes-and-benefits-for-logging" tabindex="-1">Key Changes and Benefits for Logging <a class="header-anchor" href="#key-changes-and-benefits-for-logging" aria-label="Permalink to &quot;Key Changes and Benefits for Logging&quot;">​</a></h3><ul><li><strong>Standardized Log Transport:</strong> Logs from various sources will now be channeled through the OpenTelemetry Collector. <ul><li><strong>Shoot Node Log Collection:</strong> The existing <code>valitail</code> systemd service on shoot nodes is being replaced by an OpenTelemetry Collector. This new collector will gather systemd logs (e.g., from <code>kernel</code>, <code>kubelet.service</code>, <code>containerd.service</code>) with parity to <code>valitail</code>&#39;s previous functionality and forward them to the OpenTelemetry Collector instance residing in the shoot control plane.</li><li><strong>Fluent Bit Integration:</strong> Existing Fluent Bit instances, which act as log shippers on seed clusters, will be configured to forward logs to the OpenTelemetry Collector&#39;s receivers. This ensures continued compatibility with the Vali-based setup previously established by <a href="https://github.com/gardener/gardener/blob/master/docs/proposals/19-migrating-observability-stack-to-operators.md" target="_blank" rel="noreferrer">GEP-19</a>.</li></ul></li><li><strong>Backend Agility:</strong> While initially the OpenTelemetry Collector will be configured to use its Loki exporter to send logs to the existing Vali backend, this architecture introduces significant flexibility. It allows Gardener to switch to any OpenTelemetry-compatible backend in the future, with plans to eventually migrate to Victoria-Logs.</li><li><strong>Phased Rollout:</strong> The transition to OpenTelemetry is designed as a phased approach. Existing observability tools like Vali, Fluent Bit, and Prometheus will be gradually integrated and some backends such as Vali will be replaced.</li><li><strong>Foundation for Future Observability:</strong> Although this GEP primarily targets logging, it critically establishes the foundation for incorporating other observability signals, such as metrics and traces, into the OpenTelemetry framework. Future enhancements may include: <ul><li>Utilizing the OpenTelemetry Collector on shoot nodes to also scrape and process metrics.</li><li>Replacing the current event logger component with the OpenTelemetry Collector&#39;s <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/k8seventsreceiver" target="_blank" rel="noreferrer"><code>k8s-event</code> receiver</a> within the shoot&#39;s OpenTelemetry Collector instance.</li></ul></li></ul><h3 id="explore-further" tabindex="-1">Explore Further <a class="header-anchor" href="#explore-further" aria-label="Permalink to &quot;Explore Further&quot;">​</a></h3><p>This integration marks a significant step in Gardener&#39;s observability journey, promising a more robust and adaptable system.</p><ul><li>Dive deeper into the technical details by reading the full proposal: <a href="https://github.com/gardener/gardener/pull/11861" target="_blank" rel="noreferrer">GEP-34: OpenTelemetry Operator And Collectors</a>.</li><li>Watch the segment from the Gardener Review Meeting discussing this feature: <a href="https://youtu.be/HguO_KY86ac?t=849" target="_blank" rel="noreferrer">Recording (starts at 14:09)</a>.</li><li>Learn more about the overall strategy in the <a href="https://github.com/gardener/logging/blob/master/docs/observability-2.0/Observability%202.0.md" target="_blank" rel="noreferrer">Observability 2.0 vision for Gardener</a>.</li></ul>',12)]))}const b=t(i,[["render",a]]);export{p as __pageData,b as default};
