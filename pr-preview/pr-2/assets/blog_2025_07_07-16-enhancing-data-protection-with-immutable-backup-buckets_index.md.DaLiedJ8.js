import{_ as s,c as a,o as e,a2 as n}from"./chunks/framework.B8WFj13S.js";const d=JSON.parse('{"title":"Enhancing Data Protection with Immutable Backup Buckets","description":"","frontmatter":{"aliases":["/blog/2025/07/16/enhancing-data-protection-with-immutable-backup-buckets"],"authors":[{"avatar":"https://avatars.githubusercontent.com/ishan16696","login":"ishan16696","name":"Ishan Tyagi"}],"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/blog/2025/07","linkTitle":"Enhancing Data Protection with Immutable Backup Buckets","newsSubtitle":"July 16, 2025","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/blog/2025/07/07-16-enhancing-data-protection-with-immutable-backup-buckets.md","to":"07-16-enhancing-data-protection-with-immutable-backup-buckets.md"},"publishdate":"2025-07-16","title":"Enhancing Data Protection with Immutable Backup Buckets"},"headers":[],"relativePath":"blog/2025/07/07-16-enhancing-data-protection-with-immutable-backup-buckets/index.md","filePath":"blog/2025/07/07-16-enhancing-data-protection-with-immutable-backup-buckets.md","lastUpdated":null}'),t={name:"blog/2025/07/07-16-enhancing-data-protection-with-immutable-backup-buckets/index.md"};function l(r,i,p,h,o,k){return e(),a("div",null,i[0]||(i[0]=[n(`<h1 id="enhancing-data-protection-with-immutable-backup-buckets" tabindex="-1">Enhancing Data Protection with Immutable Backup Buckets <a class="header-anchor" href="#enhancing-data-protection-with-immutable-backup-buckets" aria-label="Permalink to &quot;Enhancing Data Protection with Immutable Backup Buckets&quot;">​</a></h1><p>Gardener has introduced support for immutable backup buckets, a critical feature for enhancing the security and resilience of your Kubernetes clusters. This new capability leverages native cloud provider features to protect your etcd backups from accidental or malicious deletion and modification, helping you meet stringent security and compliance requirements.</p><h3 id="what-are-immutable-backup-buckets" tabindex="-1">What Are Immutable Backup Buckets? <a class="header-anchor" href="#what-are-immutable-backup-buckets" aria-label="Permalink to &quot;What Are Immutable Backup Buckets?&quot;">​</a></h3><p>Immutable backup buckets ensure that once a backup snapshot is written, it cannot be altered or deleted for a predefined retention period. Gardener configures this by applying immutability policies (often called &quot;Object Lock&quot; or &quot;WORM&quot; - Write Once, Read Many) to the backup buckets managed by provider extensions.</p><p>When enabled, the provider extension will:</p><ul><li><strong>Create</strong> new backup buckets with the specified immutability policy.</li><li><strong>Reconcile</strong> existing buckets to enforce the desired policy.</li><li><strong>Prevent</strong> any changes that would weaken the policy, such as shortening the retention period or disabling the lock.</li></ul><p>It is crucial to understand that once an immutability policy is locked on a bucket, it is irreversible and cannot be shortened, even by an administrator.</p><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h3><p>The feature is configured on the <code>Seed</code> resource. When you enable immutability, the backup objects will inherit the bucket lock settings, and all the backups/snapshots in the bucket will be protected by the immutability policy.</p><p>To safeguard against misconfiguration, a Gardener admission webhook enforces the immutability rules. Once a policy is locked, the webhook prevents it from being disabled or the retention period from being shortened.</p><p>When a shoot cluster is deleted, Gardener&#39;s backup entry controller handles the cleanup. For locked snapshots that cannot be deleted immediately, the controller creates a lifecycle policy on the cloud provider bucket. This policy ensures the snapshots are automatically deleted once their retention period expires.</p><h3 id="how-to-enable-immutability" tabindex="-1">How to Enable Immutability <a class="header-anchor" href="#how-to-enable-immutability" aria-label="Permalink to &quot;How to Enable Immutability&quot;">​</a></h3><p>You can enable immutable backups by defining the <code>immutability</code> policy within the <code>.spec.backup.providerConfig</code> section of your <code>Seed</code> manifest. The configuration options may vary slightly between cloud providers.</p><p>Below are examples for supported providers:</p><h4 id="aws" tabindex="-1">AWS <a class="header-anchor" href="#aws" aria-label="Permalink to &quot;AWS&quot;">​</a></h4><p>For AWS, immutability is built on S3 Object Lock and Versioning. You can choose between <code>compliance</code> or <code>governance</code> mode.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Part of a Seed resource</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">aws</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    providerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">aws.provider.extensions.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupBucketConfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      immutability</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        retentionType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bucket</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        retentionPeriod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">96h</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">compliance</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # or governance</span></span></code></pre></div><h4 id="gcp" tabindex="-1">GCP <a class="header-anchor" href="#gcp" aria-label="Permalink to &quot;GCP&quot;">​</a></h4><p>For GCP, the configuration involves setting a retention period and locking the policy.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Part of a Seed resource</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gcp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    providerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gcp.provider.extensions.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupBucketConfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      immutability</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        retentionType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bucket</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        retentionPeriod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">96h</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        locked</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h4 id="azure" tabindex="-1">Azure <a class="header-anchor" href="#azure" aria-label="Permalink to &quot;Azure&quot;">​</a></h4><p>The configuration for Azure is similar to GCP, enabling container-level immutability.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Part of a Seed resource</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">azure</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    providerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">azure.provider.extensions.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupBucketConfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      immutability</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        retentionType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bucket</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        retentionPeriod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">96h</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        locked</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h3 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h3><p>To learn more about this feature and explore detailed configuration options, check out the following resources:</p><ul><li><strong>Recording:</strong> <a href="https://youtu.be/NiXCYnrURvU?t=1524" target="_blank" rel="noreferrer">Watch the presentation on Immutable Backup Buckets</a></li><li><strong>GitHub Pull Request:</strong> <a href="https://github.com/gardener/gardener/pull/12175" target="_blank" rel="noreferrer">Add Usage Documentation for Immutable Backup Buckets (#12175)</a></li><li><strong>Provider Documentation:</strong><ul><li><a href="/documentation/pr-preview/pr-2/docs/extensions/infrastructure-extensions/gardener-extension-provider-aws/usage/#backupbucketconfig">AWS BackupBucketConfig</a></li><li><a href="/documentation/pr-preview/pr-2/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/usage/#backupbucketconfig">GCP BackupBucketConfig</a></li><li><a href="/documentation/pr-preview/pr-2/docs/extensions/infrastructure-extensions/gardener-extension-provider-azure/usage/#backupbucketconfig">Azure BackupBucketConfig</a></li></ul></li><li><strong>etcd-backup-restore:</strong> <a href="https://github.com/gardener/etcd-backup-restore/blob/master/docs/usage/enabling_immutable_snapshots.md" target="_blank" rel="noreferrer">Enabling Immutable Snapshots</a></li></ul>`,26)]))}const u=s(t,[["render",l]]);export{d as __pageData,u as default};
