import{_ as o,c as t,o as d,a2 as r}from"./chunks/framework.Bfq10Vlj.js";const m=JSON.parse('{"title":"Priority Classes","description":"","frontmatter":{"github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/development","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/priority-classes.md","to":"priority-classes.md"},"persona":"Developers","title":"Priority Classes","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/priority-classes/index.md","filePath":"docs/gardener/priority-classes.md","lastUpdated":null}'),c={name:"docs/gardener/priority-classes/index.md"};function s(a,e,n,i,l,h){return d(),t("div",null,e[0]||(e[0]=[r('<h1 id="priorityclasses-in-gardener-clusters" tabindex="-1"><code>PriorityClass</code>es in Gardener Clusters <a class="header-anchor" href="#priorityclasses-in-gardener-clusters" aria-label="Permalink to &quot;`PriorityClass`es in Gardener Clusters&quot;">​</a></h1><p>Gardener makes use of <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/" target="_blank" rel="noreferrer"><code>PriorityClass</code>es</a> to improve the overall robustness of the system. In order to benefit from the full potential of <code>PriorityClass</code>es, the gardenlet manages a set of well-known <code>PriorityClass</code>es with fine-granular priority values.</p><p>All components of the system should use these well-known <code>PriorityClass</code>es instead of creating and using separate ones with arbitrary values, which would compromise the overall goal of using <code>PriorityClass</code>es in the first place. The gardenlet manages the well-known <code>PriorityClass</code>es listed in this document, so that third parties (e.g., Gardener extensions) can rely on them to be present when deploying components to Seed and Shoot clusters.</p><p>The listed well-known <code>PriorityClass</code>es follow this rough concept:</p><ul><li>Values are close to the maximum that can be declared by the user. This is important to ensure that Shoot system components have higher priority than the workload deployed by end-users.</li><li>Values have a bit of headroom in between to ensure flexibility when the need for intermediate priority values arises.</li><li>Values of <code>PriorityClass</code>es created on Seed clusters are lower than the ones on Shoots to ensure that Shoot system components have higher priority than Seed components, if the Seed is backed by a Shoot (<code>ManagedSeed</code>), e.g. <code>coredns</code> should have higher priority than <code>gardenlet</code>.</li><li>Names simply include the last digits of the value to minimize confusion caused by many (similar) names like <code>critical</code>, <code>importance-high</code>, etc.</li></ul><h2 id="garden-clusters" tabindex="-1">Garden Clusters <a class="header-anchor" href="#garden-clusters" aria-label="Permalink to &quot;Garden Clusters&quot;">​</a></h2><p>When using the <code>gardener-operator</code> for managing the garden runtime and virtual cluster, the following <code>PriorityClass</code>es are available:</p><h3 id="priorityclasses-for-garden-control-plane-components" tabindex="-1"><code>PriorityClass</code>es for Garden Control Plane Components <a class="header-anchor" href="#priorityclasses-for-garden-control-plane-components" aria-label="Permalink to &quot;`PriorityClass`es for Garden Control Plane Components&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Name</th><th>Priority</th><th>Associated Components (Examples)</th></tr></thead><tbody><tr><td><code>gardener-garden-system-critical</code></td><td>999999550</td><td><code>gardener-operator</code>, <code>gardener-resource-manager</code>, <code>istio</code></td></tr><tr><td><code>gardener-garden-system-500</code></td><td>999999500</td><td><code>virtual-garden-etcd-events</code>, <code>virtual-garden-etcd-main</code>, <code>virtual-garden-kube-apiserver</code>, <code>gardener-apiserver</code></td></tr><tr><td><code>gardener-garden-system-400</code></td><td>999999400</td><td><code>virtual-garden-gardener-resource-manager</code>, <code>gardener-admission-controller</code>, Extension Admission Controllers</td></tr><tr><td><code>gardener-garden-system-300</code></td><td>999999300</td><td><code>virtual-garden-kube-controller-manager</code>, <code>vpa-admission-controller</code>, <code>etcd-druid</code>, <code>nginx-ingress-controller</code></td></tr><tr><td><code>gardener-garden-system-200</code></td><td>999999200</td><td><code>vpa-recommender</code>, <code>vpa-updater</code>, <code>gardener-scheduler</code>, <code>gardener-controller-manager</code>, <code>gardener-dashboard</code>, <code>terminal-controller-manager</code>, <code>gardener-discovery-server</code>, Extension Controllers</td></tr><tr><td><code>gardener-garden-system-100</code></td><td>999999100</td><td><code>fluent-operator</code>, <code>fluent-bit</code>, <code>gardener-metrics-exporter</code>, <code>kube-state-metrics</code>, <code>plutono</code>, <code>vali</code>, <code>prometheus-operator</code>, <code>alertmanager-garden</code>, <code>prometheus-garden</code>, <code>blackbox-exporter</code>, <code>prometheus-longterm</code>, <code>perses-operator</code>, <code>opentelemetry-operator</code></td></tr></tbody></table><h2 id="seed-clusters" tabindex="-1">Seed Clusters <a class="header-anchor" href="#seed-clusters" aria-label="Permalink to &quot;Seed Clusters&quot;">​</a></h2><h3 id="priorityclasses-for-seed-system-components" tabindex="-1"><code>PriorityClass</code>es for Seed System Components <a class="header-anchor" href="#priorityclasses-for-seed-system-components" aria-label="Permalink to &quot;`PriorityClass`es for Seed System Components&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Name</th><th>Priority</th><th>Associated Components (Examples)</th></tr></thead><tbody><tr><td><code>gardener-system-critical</code></td><td>999998950</td><td><code>gardenlet</code>, <code>gardener-resource-manager</code>, <code>istio-ingressgateway</code>, <code>istiod</code></td></tr><tr><td><code>gardener-system-900</code></td><td>999998900</td><td>Extensions</td></tr><tr><td><code>gardener-system-800</code></td><td>999998800</td><td><code>dependency-watchdog-endpoint</code>, <code>dependency-watchdog-probe</code>, <code>etcd-druid</code>, <code>vpa-admission-controller</code></td></tr><tr><td><code>gardener-system-700</code></td><td>999998700</td><td><code>vpa-recommender</code>, <code>vpa-updater</code></td></tr><tr><td><code>gardener-system-600</code></td><td>999998600</td><td><code>alertmanager-seed</code>, <code>fluent-operator</code>, <code>fluent-bit</code>, <code>plutono</code>, <code>kube-state-metrics</code>, <code>nginx-ingress-controller</code>, <code>nginx-k8s-backend</code>, <code>prometheus-operator</code>, <code>prometheus-aggregate</code>, <code>prometheus-cache</code>, <code>prometheus-seed</code>, <code>vali</code>, <code>perses-operator</code>, <code>opentelemetry-operator</code></td></tr><tr><td><code>gardener-reserve-excess-capacity</code></td><td>-5</td><td><code>reserve-excess-capacity</code> (<a href="https://github.com/gardener/gardener/pull/6135" target="_blank" rel="noreferrer">ref</a>)</td></tr></tbody></table><h3 id="priorityclasses-for-shoot-control-plane-components" tabindex="-1"><code>PriorityClass</code>es for Shoot Control Plane Components <a class="header-anchor" href="#priorityclasses-for-shoot-control-plane-components" aria-label="Permalink to &quot;`PriorityClass`es for Shoot Control Plane Components&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Name</th><th>Priority</th><th>Associated Components (Examples)</th></tr></thead><tbody><tr><td><code>gardener-system-500</code></td><td>999998500</td><td><code>etcd-events</code>, <code>etcd-main</code>, <code>kube-apiserver</code></td></tr><tr><td><code>gardener-system-400</code></td><td>999998400</td><td><code>gardener-resource-manager</code></td></tr><tr><td><code>gardener-system-300</code></td><td>999998300</td><td><code>cloud-controller-manager</code>, <code>cluster-autoscaler</code>, <code>csi-driver-controller</code>, <code>kube-controller-manager</code>, <code>kube-scheduler</code>, <code>machine-controller-manager</code>, <code>terraformer</code>, <code>vpn-seed-server</code></td></tr><tr><td><code>gardener-system-200</code></td><td>999998200</td><td><code>csi-snapshot-controller</code>, <code>csi-snapshot-validation</code>, <code>cert-controller-manager</code>, <code>shoot-dns-service</code>, <code>vpa-admission-controller</code>, <code>vpa-recommender</code>, <code>vpa-updater</code></td></tr><tr><td><code>gardener-system-100</code></td><td>999998100</td><td><code>alertmanager-shoot</code>, <code>plutono</code>, <code>kube-state-metrics</code>, <code>prometheus-shoot</code>, <code>blackbox-exporter</code>, <code>vali</code>, <code>event-logger</code></td></tr></tbody></table><h2 id="shoot-clusters" tabindex="-1">Shoot Clusters <a class="header-anchor" href="#shoot-clusters" aria-label="Permalink to &quot;Shoot Clusters&quot;">​</a></h2><h2 id="priorityclasses-for-shoot-system-components" tabindex="-1"><code>PriorityClass</code>es for Shoot System Components <a class="header-anchor" href="#priorityclasses-for-shoot-system-components" aria-label="Permalink to &quot;`PriorityClass`es for Shoot System Components&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Name</th><th>Priority</th><th>Associated Components (Examples)</th></tr></thead><tbody><tr><td><code>system-node-critical</code> (created by Kubernetes)</td><td>2000001000</td><td><code>calico-node</code>, <code>kube-proxy</code>, <code>apiserver-proxy</code>, <code>csi-driver</code>, <code>egress-filter-applier</code></td></tr><tr><td><code>system-cluster-critical</code> (created by Kubernetes)</td><td>2000000000</td><td><code>calico-typha</code>, <code>calico-kube-controllers</code>, <code>coredns</code>, <code>vpn-shoot</code>, <code>registry-cache</code></td></tr><tr><td><code>gardener-shoot-system-900</code></td><td>999999900</td><td><code>node-problem-detector</code></td></tr><tr><td><code>gardener-shoot-system-800</code></td><td>999999800</td><td><code>calico-typha-horizontal-autoscaler</code>, <code>calico-typha-vertical-autoscaler</code></td></tr><tr><td><code>gardener-shoot-system-700</code></td><td>999999700</td><td><code>blackbox-exporter</code>, <code>node-exporter</code></td></tr><tr><td><code>gardener-shoot-system-600</code></td><td>999999600</td><td><code>addons-nginx-ingress-controller</code>, <code>addons-nginx-ingress-k8s-backend</code>, <code>kubernetes-dashboard</code>, <code>kubernetes-metrics-scraper</code></td></tr></tbody></table>',17)]))}const u=o(c,[["render",s]]);export{m as __pageData,u as default};
