import{_ as a,c as r,o as s,a2 as t}from"./chunks/framework.B8WFj13S.js";const g=JSON.parse('{"title":"Lakom Service","description":"A k8s admission controller verifying pods are using signed images (cosign signatures) and a gardener extension to install it for shoots and seeds.","frontmatter":{"description":"A k8s admission controller verifying pods are using signed images (cosign signatures) and a gardener extension to install it for shoots and seeds.","github_repo":"https://github.com/gardener/gardener-extension-shoot-lakom-service","github_subdir":".","params":{"github_branch":"main"},"path_base_for_github_subdir":{"from":"content/docs/extensions/others/gardener-extension-shoot-lakom-service/_index.md","to":"README.md"},"title":"Lakom Service","prev":false,"next":false},"headers":[],"relativePath":"docs/extensions/others/gardener-extension-shoot-lakom-service/index.md","filePath":"docs/extensions/others/gardener-extension-shoot-lakom-service/index.md","lastUpdated":null}'),n={name:"docs/extensions/others/gardener-extension-shoot-lakom-service/index.md"};function o(i,e,l,d,h,c){return s(),r("div",null,e[0]||(e[0]=[t(`<h1 id="gardener-extension-for-lakom-services" tabindex="-1"><a href="https://gardener.cloud" target="_blank" rel="noreferrer">Gardener Extension for lakom services</a> <a class="header-anchor" href="#gardener-extension-for-lakom-services" aria-label="Permalink to &quot;[Gardener Extension for lakom services](https://gardener.cloud)&quot;">​</a></h1><p><a href="https://api.reuse.software/info/github.com/gardener/gardener-extension-shoot-lakom-service" target="_blank" rel="noreferrer"><img src="https://api.reuse.software/badge/github.com/gardener/gardener-extension-shoot-lakom-service" alt="REUSE status"></a></p><p>Project Gardener implements the automated management and operation of <a href="https://kubernetes.io/" target="_blank" rel="noreferrer">Kubernetes</a> clusters as a service. Its main principle is to leverage Kubernetes concepts for all of its tasks.</p><p>Recently, most of the vendor specific logic has been developed <a href="https://github.com/gardener/gardener" target="_blank" rel="noreferrer">in-tree</a>. However, the project has grown to a size where it is very hard to extend, maintain, and test. With <a href="https://github.com/gardener/gardener/blob/master/docs/proposals/01-extensibility.md" target="_blank" rel="noreferrer">GEP-1</a> we have proposed how the architecture can be changed in a way to support external controllers that contain their very own vendor specifics. This way, we can keep Gardener core clean and independent.</p><p>This controller implements Gardener&#39;s extension contract for the <code>shoot-lakom-service</code> extension.</p><p>An example for a <code>ControllerRegistration</code> resource that can be used to register this controller to Gardener can be found <a href="https://github.com/gardener/gardener-extension-shoot-lakom-service/blob/main/example/controller-registration.yaml" target="_blank" rel="noreferrer">here</a>.</p><p>Please find more information regarding the extensibility concepts and a detailed proposal <a href="https://github.com/gardener/gardener/blob/master/docs/proposals/01-extensibility.md" target="_blank" rel="noreferrer">here</a>.</p><h2 id="lakom-admission-controller" tabindex="-1">Lakom Admission Controller <a class="header-anchor" href="#lakom-admission-controller" aria-label="Permalink to &quot;Lakom Admission Controller&quot;">​</a></h2><p>Lakom is kubernetes admission controller which purpose is to implement <a href="https://github.com/sigstore/cosign" target="_blank" rel="noreferrer">cosign</a> image signature verification against public cosign key. It also takes care to resolve image tags to sha256 digests. It also caches all OCI artifacts to reduce the load toward the OCI registry.</p><h2 id="extension-resources" tabindex="-1">Extension Resources <a class="header-anchor" href="#extension-resources" aria-label="Permalink to &quot;Extension Resources&quot;">​</a></h2><p>Example extension resource:</p><blockquote></blockquote><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">extensions.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Extension</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">extension-shoot-lakom-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shoot--project--abc</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shoot-lakom-service</span></span></code></pre></div><p>When an extension resource is reconciled, the extension controller will create an instance of <code>lakom</code> admission controller. These resources are placed inside the shoot namespace on the seed. Also, the controller takes care about generating necessary <code>RBAC</code> resources for the seed as well as for the shoot.</p><p>Please note, this extension controller relies on the <a href="documentation/pr-preview/pr-2/docs/gardener/concepts/resource-manager/">Gardener-Resource-Manager</a> to deploy k8s resources to seed and shoot clusters.</p><h2 id="how-to-start-using-or-developing-this-extension-controller-locally" tabindex="-1">How to start using or developing this extension controller locally <a class="header-anchor" href="#how-to-start-using-or-developing-this-extension-controller-locally" aria-label="Permalink to &quot;How to start using or developing this extension controller locally&quot;">​</a></h2><p>The <code>Lakom</code> admission controller can be configured with <code>make dev-setup</code> and started with <code>make start-lakom</code>. You can run the lakom extension controller locally on your machine by executing <code>make start</code>.</p><p>If you&#39;d like to develop Lakom using a local cluster such as KinD, make sure your KUBECONFIG environment variable is targeting the local Garden cluster. Add <code>127.0.0.1 garden.local.gardener.cloud</code> to your <code>/etc/hosts</code>. You can then run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> extension-up</span></span></code></pre></div><p>This will trigger a skaffold deployment that builds the images, pushes them to the registry and installs the helm charts from <code>/charts</code>.</p><p>We are using Go modules for Golang package dependency management and <a href="https://github.com/onsi/ginkgo" target="_blank" rel="noreferrer">Ginkgo</a>/<a href="https://github.com/onsi/gomega" target="_blank" rel="noreferrer">Gomega</a> for testing.</p><h2 id="feedback-and-support" tabindex="-1">Feedback and Support <a class="header-anchor" href="#feedback-and-support" aria-label="Permalink to &quot;Feedback and Support&quot;">​</a></h2><p>Feedback and contributions are always welcome!</p><p>Please report bugs or suggestions as <a href="https://github.com/gardener/gardener-extension-shoot-lakom-service/issues" target="_blank" rel="noreferrer">GitHub issues</a> or reach out on <a href="https://gardener-cloud.slack.com/" target="_blank" rel="noreferrer">Slack</a> (join the workspace <a href="https://gardener.cloud/community/community-bio/" target="_blank" rel="noreferrer">here</a>).</p><h2 id="learn-more" tabindex="-1">Learn more <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn more&quot;">​</a></h2><p>Please find further resources about out project here:</p><ul><li><a href="https://gardener.cloud/" target="_blank" rel="noreferrer">Our landing page gardener.cloud</a></li><li><a href="https://kubernetes.io/blog/2018/05/17/gardener/" target="_blank" rel="noreferrer">&quot;Gardener, the Kubernetes Botanist&quot; blog on kubernetes.io</a></li><li><a href="https://kubernetes.io/blog/2019/12/02/gardener-project-update/" target="_blank" rel="noreferrer">&quot;Gardener Project Update&quot; blog on kubernetes.io</a></li><li><a href="https://github.com/gardener/gardener/blob/master/docs/proposals/01-extensibility.md" target="_blank" rel="noreferrer">GEP-1 (Gardener Enhancement Proposal) on extensibility</a></li><li><a href="https://github.com/gardener/gardener/tree/master/docs/extensions" target="_blank" rel="noreferrer">Extensibility API documentation</a></li><li><a href="https://godoc.org/github.com/gardener/gardener/extensions/pkg" target="_blank" rel="noreferrer">Gardener Extensions Golang library</a></li><li><a href="https://gardener.cloud/api-reference/" target="_blank" rel="noreferrer">Gardener API Reference</a></li></ul>`,27)]))}const k=a(n,[["render",o]]);export{g as __pageData,k as default};
