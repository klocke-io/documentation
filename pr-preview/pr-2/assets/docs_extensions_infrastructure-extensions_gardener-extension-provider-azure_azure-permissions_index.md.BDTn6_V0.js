import{_ as a,c as n,o as e,a2 as t}from"./chunks/framework.Bfq10Vlj.js";const f=JSON.parse('{"title":"Azure Permissions","description":"","frontmatter":{"github_repo":"https://github.com/gardener/gardener-extension-provider-azure","github_subdir":"docs/usage","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/extensions/infrastructure-extensions/gardener-extension-provider-azure/azure-permissions.md","to":"azure-permissions.md"},"persona":"Users","title":"Azure Permissions","prev":false,"next":false},"headers":[],"relativePath":"docs/extensions/infrastructure-extensions/gardener-extension-provider-azure/azure-permissions/index.md","filePath":"docs/extensions/infrastructure-extensions/gardener-extension-provider-azure/azure-permissions.md","lastUpdated":null}'),o={name:"docs/extensions/infrastructure-extensions/gardener-extension-provider-azure/azure-permissions/index.md"};function i(r,s,p,c,l,d){return e(),n("div",null,s[0]||(s[0]=[t(`<h1 id="azure-permissions" tabindex="-1">Azure Permissions <a class="header-anchor" href="#azure-permissions" aria-label="Permalink to &quot;Azure Permissions&quot;">​</a></h1><p>The following document describes the required Azure actions manage a Shoot cluster on Azure split by the different Azure provider/services.</p><p>Be aware some actions are just required if particular deployment scenarios or features e.g. bring your own vNet, use Azure-file, let the Shoot act as Seed, immutable buckets, etc. should be used.</p><h2 id="microsoft-compute" tabindex="-1"><code>Microsoft.Compute</code> <a class="header-anchor" href="#microsoft-compute" aria-label="Permalink to &quot;\`Microsoft.Compute\`&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Required if a non zonal cluster based on Availability Set should be used.</span></span>
<span class="line"><span>Microsoft.Compute/availabilitySets/delete</span></span>
<span class="line"><span>Microsoft.Compute/availabilitySets/read</span></span>
<span class="line"><span>Microsoft.Compute/availabilitySets/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required to let Kubernetes manage Azure disks.</span></span>
<span class="line"><span>Microsoft.Compute/disks/delete</span></span>
<span class="line"><span>Microsoft.Compute/disks/read</span></span>
<span class="line"><span>Microsoft.Compute/disks/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required for to fetch meta information about disk and virtual machines sizes.</span></span>
<span class="line"><span>Microsoft.Compute/locations/diskOperations/read</span></span>
<span class="line"><span>Microsoft.Compute/locations/operations/read</span></span>
<span class="line"><span>Microsoft.Compute/locations/vmSizes/read</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required if csi snapshot capabilities should be used and/or the Shoot should act as a Seed.</span></span>
<span class="line"><span>Microsoft.Compute/snapshots/delete</span></span>
<span class="line"><span>Microsoft.Compute/snapshots/read</span></span>
<span class="line"><span>Microsoft.Compute/snapshots/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required to let Gardener/Machine-Controller-Manager manage the cluster nodes/machines.</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachines/delete</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachines/read</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachines/start/action</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachines/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required if a non zonal cluster based on VMSS Flex (VMO) should be used.</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachineScaleSets/delete</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachineScaleSets/read</span></span>
<span class="line"><span>Microsoft.Compute/virtualMachineScaleSets/write</span></span></code></pre></div><h2 id="microsoft-managedidentity" tabindex="-1"><code>Microsoft.ManagedIdentity</code> <a class="header-anchor" href="#microsoft-managedidentity" aria-label="Permalink to &quot;\`Microsoft.ManagedIdentity\`&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Required if a user provided Azure managed identity should attached to the cluster nodes.</span></span>
<span class="line"><span>Microsoft.ManagedIdentity/userAssignedIdentities/assign/action</span></span>
<span class="line"><span>Microsoft.ManagedIdentity/userAssignedIdentities/read</span></span></code></pre></div><h2 id="microsoft-marketplaceordering" tabindex="-1"><code>Microsoft.MarketplaceOrdering</code> <a class="header-anchor" href="#microsoft-marketplaceordering" aria-label="Permalink to &quot;\`Microsoft.MarketplaceOrdering\`&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Required if nodes/machines should be created with images hosted on the Azure Marketplace.</span></span>
<span class="line"><span>Microsoft.MarketplaceOrdering/offertypes/publishers/offers/plans/agreements/read</span></span>
<span class="line"><span>Microsoft.MarketplaceOrdering/offertypes/publishers/offers/plans/agreements/write</span></span></code></pre></div><h2 id="microsoft-network" tabindex="-1"><code>Microsoft.Network</code> <a class="header-anchor" href="#microsoft-network" aria-label="Permalink to &quot;\`Microsoft.Network\`&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Required to let Kubernetes manage services of type &#39;LoadBalancer&#39;.</span></span>
<span class="line"><span>Microsoft.Network/loadBalancers/backendAddressPools/join/action</span></span>
<span class="line"><span>Microsoft.Network/loadBalancers/delete</span></span>
<span class="line"><span>Microsoft.Network/loadBalancers/read</span></span>
<span class="line"><span>Microsoft.Network/loadBalancers/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required in case the Shoot should use NatGateway(s).</span></span>
<span class="line"><span>Microsoft.Network/natGateways/delete</span></span>
<span class="line"><span>Microsoft.Network/natGateways/join/action</span></span>
<span class="line"><span>Microsoft.Network/natGateways/read</span></span>
<span class="line"><span>Microsoft.Network/natGateways/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required to let Gardener/Machine-Controller-Manager manage the cluster nodes/machines.</span></span>
<span class="line"><span>Microsoft.Network/networkInterfaces/delete</span></span>
<span class="line"><span>Microsoft.Network/networkInterfaces/ipconfigurations/join/action</span></span>
<span class="line"><span>Microsoft.Network/networkInterfaces/ipconfigurations/read</span></span>
<span class="line"><span>Microsoft.Network/networkInterfaces/join/action</span></span>
<span class="line"><span>Microsoft.Network/networkInterfaces/read</span></span>
<span class="line"><span>Microsoft.Network/networkInterfaces/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required to let Gardener maintain the basic infrastructure of the Shoot cluster and maintaing LoadBalancer services.</span></span>
<span class="line"><span>Microsoft.Network/networkSecurityGroups/delete</span></span>
<span class="line"><span>Microsoft.Network/networkSecurityGroups/join/action</span></span>
<span class="line"><span>Microsoft.Network/networkSecurityGroups/read</span></span>
<span class="line"><span>Microsoft.Network/networkSecurityGroups/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required for managing LoadBalancers and NatGateways.</span></span>
<span class="line"><span>Microsoft.Network/publicIPAddresses/delete</span></span>
<span class="line"><span>Microsoft.Network/publicIPAddresses/join/action</span></span>
<span class="line"><span>Microsoft.Network/publicIPAddresses/read</span></span>
<span class="line"><span>Microsoft.Network/publicIPAddresses/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required for managing the basic infrastructure of a cluster and maintaing LoadBalancer services.</span></span>
<span class="line"><span>Microsoft.Network/routeTables/delete</span></span>
<span class="line"><span>Microsoft.Network/routeTables/join/action</span></span>
<span class="line"><span>Microsoft.Network/routeTables/read</span></span>
<span class="line"><span>Microsoft.Network/routeTables/routes/delete</span></span>
<span class="line"><span>Microsoft.Network/routeTables/routes/read</span></span>
<span class="line"><span>Microsoft.Network/routeTables/routes/write</span></span>
<span class="line"><span>Microsoft.Network/routeTables/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required to let Gardener maintain the basic infrastructure of the Shoot cluster.</span></span>
<span class="line"><span># Only a subset is required for the bring your own vNet scenario.</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/delete # not required for bring your own vnet</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/read</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/subnets/delete</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/subnets/join/action</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/subnets/read</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/subnets/write</span></span>
<span class="line"><span>Microsoft.Network/virtualNetworks/write # not required for bring your own vnet</span></span></code></pre></div><h2 id="microsoft-resources" tabindex="-1"><code>Microsoft.Resources</code> <a class="header-anchor" href="#microsoft-resources" aria-label="Permalink to &quot;\`Microsoft.Resources\`&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Required to let Gardener maintain the basic infrastructure of the Shoot cluster.</span></span>
<span class="line"><span>Microsoft.Resources/subscriptions/resourceGroups/delete</span></span>
<span class="line"><span>Microsoft.Resources/subscriptions/resourceGroups/read</span></span>
<span class="line"><span>Microsoft.Resources/subscriptions/resourceGroups/write</span></span></code></pre></div><h2 id="microsoft-storage" tabindex="-1"><code>Microsoft.Storage</code> <a class="header-anchor" href="#microsoft-storage" aria-label="Permalink to &quot;\`Microsoft.Storage\`&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Required if Azure File should be used and/or if the Shoot should act as Seed.</span></span>
<span class="line"><span>Microsoft.Storage/operations/read</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/delete</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/read</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/write</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/read</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/delete</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/listkeys/action</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/read</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required if Shoot should act as Seed with immutable ABS containers.</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies/extend/action</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies/delete</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies/write</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies/lock/action</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies/read</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/managementPolicies/delete</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/managementPolicies/read</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/managementPolicies/write</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Required to configure storage key rotation</span></span>
<span class="line"><span>Microsoft.Storage/storageAccounts/regeneratekey/action</span></span></code></pre></div>`,15)]))}const h=a(o,[["render",i]]);export{f as __pageData,h as default};
