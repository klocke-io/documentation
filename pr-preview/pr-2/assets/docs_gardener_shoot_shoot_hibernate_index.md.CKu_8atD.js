import{_ as a,c as t,o as s,a2 as i}from"./chunks/framework.Bfq10Vlj.js";const p=JSON.parse('{"title":"Shoot Hibernation","description":"What is hibernation? Manual hibernation/wake up and specifying a hibernation schedule","frontmatter":{"aliases":["/docs/gardener/shoot_hibernate/"],"description":"What is hibernation? Manual hibernation/wake up and specifying a hibernation schedule","github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/usage/shoot","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/shoot/shoot_hibernate.md","to":"shoot_hibernate.md"},"persona":"Users","title":"Shoot Hibernation","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/shoot/shoot_hibernate/index.md","filePath":"docs/gardener/shoot/shoot_hibernate.md","lastUpdated":null}'),o={name:"docs/gardener/shoot/shoot_hibernate/index.md"};function n(r,e,h,l,u,d){return s(),t("div",null,e[0]||(e[0]=[i(`<h1 id="shoot-hibernation" tabindex="-1">Shoot Hibernation <a class="header-anchor" href="#shoot-hibernation" aria-label="Permalink to &quot;Shoot Hibernation&quot;">​</a></h1><p>Clusters are only needed 24 hours a day if they run productive workload. So whenever you do development in a cluster, or just use it for tests or demo purposes, you can save a lot of money if you scale-down your Kubernetes resources whenever you don&#39;t need them. However, scaling them down manually can become time-consuming the more resources you have.</p><p>Gardener offers a clever way to automatically scale-down all resources to zero: cluster hibernation. You can either hibernate a cluster by pushing a button, or by defining a hibernation schedule.</p><blockquote><p>To save costs, it&#39;s recommended to define a hibernation schedule before the creation of a cluster. You can hibernate your cluster or wake up your cluster manually even if there&#39;s a schedule for its hibernation.</p></blockquote><ul><li><a href="/docs/gardener/shoot/shoot_hibernate/#hibernate-a-cluster">Hibernate a Cluster</a><ul><li><a href="/docs/gardener/shoot/shoot_hibernate/#what-is-hibernation">What Is Hibernation?</a></li><li><a href="/docs/gardener/shoot/shoot_hibernate/#what-isnt-affected-by-the-hibernation">What Isn’t Affected by the Hibernation?</a></li><li><a href="/docs/gardener/shoot/shoot_hibernate/#hibernate-your-cluster-manually">Hibernate Your Cluster Manually</a></li><li><a href="/docs/gardener/shoot/shoot_hibernate/#wake-up-your-cluster-manually">Wake Up Your Cluster Manually</a></li><li><a href="/docs/gardener/shoot/shoot_hibernate/#create-a-schedule-to-hibernate-your-cluster">Create a Schedule to Hibernate Your Cluster</a></li></ul></li></ul><h2 id="what-is-hibernation" tabindex="-1">What Is Hibernation? <a class="header-anchor" href="#what-is-hibernation" aria-label="Permalink to &quot;What Is Hibernation?&quot;">​</a></h2><p>When a cluster is hibernated, Gardener scales down the worker nodes and the cluster&#39;s control plane to free resources at the IaaS provider. This affects:</p><ul><li>Your workload, for example, pods, deployments, custom resources.</li><li>The virtual machines running your workload.</li><li>The resources of the control plane of your cluster.</li></ul><h2 id="what-isn-t-affected-by-the-hibernation" tabindex="-1">What Isn’t Affected by the Hibernation? <a class="header-anchor" href="#what-isn-t-affected-by-the-hibernation" aria-label="Permalink to &quot;What Isn’t Affected by the Hibernation?&quot;">​</a></h2><p>To scale up everything where it was before hibernation, Gardener doesn’t delete state-related information, that is, information stored in persistent volumes. The cluster state as persistent in <code>etcd</code> is also preserved.</p><h2 id="hibernate-your-cluster-manually" tabindex="-1">Hibernate Your Cluster Manually <a class="header-anchor" href="#hibernate-your-cluster-manually" aria-label="Permalink to &quot;Hibernate Your Cluster Manually&quot;">​</a></h2><p>The <code>.spec.hibernation.enabled</code> field specifies whether the cluster needs to be hibernated or not. If the field is set to <code>true</code>, the cluster&#39;s desired state is to be hibernated. If it is set to <code>false</code> or not specified at all, the cluster&#39;s desired state is to be awakened.</p><p>To hibernate your cluster, you can run the following <code>kubectl</code> command:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ kubectl patch shoot -n $NAMESPACE $SHOOT_NAME -p &#39;{&quot;spec&quot;:{&quot;hibernation&quot;:{&quot;enabled&quot;: true}}}&#39;</span></span></code></pre></div><h2 id="wake-up-your-cluster-manually" tabindex="-1">Wake Up Your Cluster Manually <a class="header-anchor" href="#wake-up-your-cluster-manually" aria-label="Permalink to &quot;Wake Up Your Cluster Manually&quot;">​</a></h2><p>To wake up your cluster, you can run the following <code>kubectl</code> command:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ kubectl patch shoot -n $NAMESPACE $SHOOT_NAME -p &#39;{&quot;spec&quot;:{&quot;hibernation&quot;:{&quot;enabled&quot;: false}}}&#39;</span></span></code></pre></div><h2 id="create-a-schedule-to-hibernate-your-cluster" tabindex="-1">Create a Schedule to Hibernate Your Cluster <a class="header-anchor" href="#create-a-schedule-to-hibernate-your-cluster" aria-label="Permalink to &quot;Create a Schedule to Hibernate Your Cluster&quot;">​</a></h2><p>You can specify a hibernation schedule to automatically hibernate/wake up a cluster.</p><p>Let&#39;s have a look into the following example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  hibernation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    schedules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 20 * * *&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Start hibernation every day at 8PM</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 6 * * *&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Stop hibernation every day at 6AM</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;America/Los_Angeles&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Specify a location for the cron to run in</span></span></code></pre></div><p>The above section configures a hibernation schedule that hibernates the cluster every day at 08:00 PM and wakes it up at 06:00 AM. The <code>start</code> or <code>end</code> fields can be omitted, though at least one of them has to be specified. Hence, it is possible to configure a hibernation schedule that only hibernates or wakes up a cluster. The <code>location</code> field is the time location used to evaluate the cron expressions.</p>`,22)]))}const b=a(o,[["render",n]]);export{p as __pageData,b as default};
