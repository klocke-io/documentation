import{_ as t,c as i,o as n,a2 as s}from"./chunks/framework.B8WFj13S.js";const g=JSON.parse(`{"title":"Deploying Registry Cache Extension in Gardener's Local Setup with Provider Extensions","description":"Learn how to set up a development environment using own Seed clusters on an existing Kubernetes cluster","frontmatter":{"description":"Learn how to set up a development environment using own Seed clusters on an existing Kubernetes cluster","github_repo":"https://github.com/gardener/gardener-extension-registry-cache","github_subdir":"docs/development","params":{"github_branch":"main"},"path_base_for_github_subdir":{"from":"content/docs/extensions/others/gardener-extension-registry-cache/getting-started-remotely.md","to":"getting-started-remotely.md"},"persona":"Developers","title":"Deploying Registry Cache Extension in Gardener's Local Setup with Provider Extensions","prev":false,"next":false},"headers":[],"relativePath":"docs/extensions/others/gardener-extension-registry-cache/getting-started-remotely/index.md","filePath":"docs/extensions/others/gardener-extension-registry-cache/getting-started-remotely.md","lastUpdated":null}`),a={name:"docs/extensions/others/gardener-extension-registry-cache/getting-started-remotely/index.md"};function o(r,e,h,l,d,p){return n(),i("div",null,e[0]||(e[0]=[s('<h1 id="deploying-registry-cache-extension-in-gardener-s-local-setup-with-provider-extensions" tabindex="-1">Deploying Registry Cache Extension in Gardener&#39;s Local Setup with Provider Extensions <a class="header-anchor" href="#deploying-registry-cache-extension-in-gardener-s-local-setup-with-provider-extensions" aria-label="Permalink to &quot;Deploying Registry Cache Extension in Gardener&#39;s Local Setup with Provider Extensions&quot;">​</a></h1><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>Make sure that you have a running local Gardener setup with enabled provider extensions. The steps to complete this can be found in the <a href="/documentation/pr-preview/pr-2/docs/gardener/deployment/getting_started_locally_with_extensions/">Deploying Gardener Locally and Enabling Provider-Extensions</a> guide.</li></ul><h2 id="setting-up-the-registry-cache-extension" tabindex="-1">Setting up the Registry Cache Extension <a class="header-anchor" href="#setting-up-the-registry-cache-extension" aria-label="Permalink to &quot;Setting up the Registry Cache Extension&quot;">​</a></h2><p>Make sure that your <code>KUBECONFIG</code> environment variable is targeting the local Gardener cluster.</p><p>The location of the Gardener project from the Gardener setup step is expected to be under the same root (e.g. <code>~/go/src/github.com/gardener/</code>). If this is not the case, the location of Gardener project should be specified in <code>GARDENER_REPO_ROOT</code> environment variable:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GARDENER_REPO_ROOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;path_to_gardener_project&gt;&quot;</span></span></code></pre></div><p>Then you can run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-extension-up</span></span></code></pre></div><p>In case you have added additional Seeds you can specify the seed name:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-extension-up</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SEED_NAME=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seed-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>The corresponding make target will build the extension image, push it into the Seed cluster image registry, and deploy the registry-cache ControllerDeployment and ControllerRegistration resources into the kind cluster. The container image in the ControllerDeployment will be the image that was build and pushed into the Seed cluster image registry.</p><p>The make target will then deploy the registry-cache admission component. It will build the admission image, push it into the kind cluster image registry, and finally install the admission component charts to the kind cluster.</p><h2 id="creating-a-shoot-cluster" tabindex="-1">Creating a Shoot Cluster <a class="header-anchor" href="#creating-a-shoot-cluster" aria-label="Permalink to &quot;Creating a Shoot Cluster&quot;">​</a></h2><p>Once the above step is completed, you can create a Shoot cluster. In order to create a Shoot cluster, please create your own Shoot definition depending on providers on your Seed cluster.</p><h2 id="tearing-down-the-development-environment" tabindex="-1">Tearing Down the Development Environment <a class="header-anchor" href="#tearing-down-the-development-environment" aria-label="Permalink to &quot;Tearing Down the Development Environment&quot;">​</a></h2><p>To tear down the development environment, delete the Shoot cluster or disable the <code>registry-cache</code> extension in the Shoot&#39;s specification. When the extension is not used by the Shoot anymore, you can run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-extension-down</span></span></code></pre></div><p>The make target will delete the ControllerDeployment and ControllerRegistration of the extension, and the registry-cache admission helm deployment.</p>',19)]))}const u=t(a,[["render",o]]);export{g as __pageData,u as default};
